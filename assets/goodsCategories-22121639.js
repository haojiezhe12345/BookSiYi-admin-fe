import{D as $,H as B,I as F,F as D}from"./base-bb3a9cd4.js";import{b as K,a as x,c as b,E as z}from"./input-0dfebaa5.js";import{E as o,a as M}from"./text-f58459f4.js";import{d as S,r as T,o as U,b as p,i as y,w as c,f as n,g as v,k as m,c as A,K as H,F as L,u as P,a as _,e as R,h as q,z as h,A as k,_ as G}from"./index-7c7dea94.js";import"./aria-60e0cdc6.js";const J={style:{display:"flex"}},O=S({__name:"goodsCategories",setup(Q){const C=P(),t=T([{id:-1,categoryName:"",editing:!1}]);function I(e){t.value[e].editing=!0}function N(){t.value.push({id:-1,categoryName:"",editing:!0})}function f(e){var i=t.value[e].id;i==-1?_.post("/admin/category/add",null,{params:{name:t.value[e].categoryName}}).then(a=>{a.data.code==1?(d(),o.success("添加成功"),t.value[e].editing=!1):o.error(`添加失败: ${a.data.msg}`)}):_.put("/admin/category/udpate",{id:i,categoryName:t.value[e].categoryName}).then(a=>{a.data.code==1?(d(),o.success("修改成功"),t.value[e].editing=!1):o.error(`修改失败: ${a.data.msg}`)})}function w(e){var i=t.value[e].id;if(i==-1){t.value.splice(e,1);return}_.delete("/admin/category/delete",{params:{categoryId:i}}).then(a=>{a.data.code==1?(d(),o.success("删除成功")):o.error(`删除失败: ${a.data.msg}`)})}function d(){_.get("/admin/category/getPcInfo").then(e=>{if(e.data.data===null){C.push("/login");return}t.value=e.data.data}).catch(()=>{o.error("数据加载失败")})}return U(()=>{d()}),(e,i)=>{const a=M,r=K,g=x,E=z,V=b;return p(),y(V,{"label-width":"auto","label-position":"left",style:{padding:"12px"}},{default:c(()=>[n(g,null,{default:c(()=>[n(a,null,{default:c(()=>[v("商品分类：")]),_:1}),n(r,{type:"primary",size:"small",icon:m($),plain:"",onClick:N},{default:c(()=>[v("添加")]),_:1},8,["icon"])]),_:1}),(p(!0),A(L,null,H(t.value,(l,u)=>(p(),y(g,{label:l.id!=-1?l.id.toString():" ",key:l.id},{default:c(()=>[R("div",J,[n(E,{modelValue:l.categoryName,"onUpdate:modelValue":s=>l.categoryName=s,disabled:l.editing!=!0,onKeydown:q(s=>f(u),["enter","native"])},null,8,["modelValue","onUpdate:modelValue","disabled","onKeydown"]),h(n(r,{type:"warning",plain:"",icon:m(B),circle:"",onClick:s=>I(u)},null,8,["icon","onClick"]),[[k,l.editing!=!0]]),h(n(r,{type:"success",plain:"",icon:m(F),circle:"",onClick:s=>f(u)},null,8,["icon","onClick"]),[[k,l.editing==!0]]),n(r,{type:"danger",plain:"",icon:m(D),circle:"",onClick:s=>w(u)},null,8,["icon","onClick"])])]),_:2},1032,["label"]))),128))]),_:1})}}});const ee=G(O,[["__scopeId","data-v-9c8f945c"]]);export{ee as default};
